{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"/Users/hkhanhlam99/Desktop/Repo/WeatherApp-API/App.js\";\nimport { StatusBar } from 'expo-status-bar';\nimport React, { useState, useEffect } from 'react';\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport * as Location from 'expo-location';\nimport { colors } from \"./utils/colors\";\nimport WeatherInfo from \"./components/WeatherInfo\";\nimport UnitsPicker from \"./components/UnitsPicker\";\nimport ReloadIcon from \"./components/ReloadIcon\";\nvar WEATHER_BASE_URL = 'https://api.openweathermap.org/data/2.5/weather?';\nvar PRIMARY_COLOR = colors.PRIMARY_COLOR,\n    SECONDARY_COLOR = colors.SECONDARY_COLOR,\n    BASE_COLOR = colors.BASE_COLOR;\nexport default function App() {\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      errorMessage = _useState2[0],\n      setErrorMessage = _useState2[1];\n\n  var _useState3 = useState(null),\n      _useState4 = _slicedToArray(_useState3, 2),\n      currentWeather = _useState4[0],\n      setCurrentWeather = _useState4[1];\n\n  var _useState5 = useState('metric'),\n      _useState6 = _slicedToArray(_useState5, 2),\n      unitsSystem = _useState6[0],\n      setUnitsSystem = _useState6[1];\n\n  useEffect(function () {\n    load();\n  }, [unitsSystem]);\n\n  function load() {\n    var _await$Location$reque, status, location, _location$coords, latitude, longitude, WEATHER_URL, response, result;\n\n    return _regeneratorRuntime.async(function load$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n            _context.next = 3;\n            return _regeneratorRuntime.awrap(Location.requestPermissionsAsync());\n\n          case 3:\n            _await$Location$reque = _context.sent;\n            status = _await$Location$reque.status;\n\n            if (!(status !== 'granted')) {\n              _context.next = 8;\n              break;\n            }\n\n            setErrorMessage('Permission to access location was denied');\n            return _context.abrupt(\"return\");\n\n          case 8:\n            _context.next = 10;\n            return _regeneratorRuntime.awrap(Location.getCurrentPositionAsync());\n\n          case 10:\n            location = _context.sent;\n            _location$coords = location.coords, latitude = _location$coords.latitude, longitude = _location$coords.longitude;\n            WEATHER_URL = WEATHER_BASE_URL + \"lat=\" + latitude + \"&lon=\" + longitude + \"&units=\" + unitsSystem + \"&appid=\" + \"9fad3d395e743404766133bf2ae85202\";\n            _context.next = 15;\n            return _regeneratorRuntime.awrap(fetch(WEATHER_URL));\n\n          case 15:\n            response = _context.sent;\n            _context.next = 18;\n            return _regeneratorRuntime.awrap(response.json());\n\n          case 18:\n            result = _context.sent;\n\n            if (response.ok) {\n              setCurrentWeather(result);\n            } else {\n              setErrorMessage(result.message);\n            }\n\n            _context.next = 25;\n            break;\n\n          case 22:\n            _context.prev = 22;\n            _context.t0 = _context[\"catch\"](0);\n            setErrorMessage(_context.t0.message);\n\n          case 25:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, [[0, 22]], Promise);\n  }\n\n  if (currentWeather) {\n    return React.createElement(View, {\n      style: styles.container,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 7\n      }\n    }, React.createElement(StatusBar, {\n      style: \"auto\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 9\n      }\n    }), React.createElement(View, {\n      style: styles.main,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 11\n      }\n    }, React.createElement(ReloadIcon, {\n      load: load,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 11\n      }\n    }), React.createElement(UnitsPicker, {\n      unitsSystem: unitsSystem,\n      setUnitsSystem: setUnitsSystem,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 11\n      }\n    }), React.createElement(WeatherInfo, {\n      currentWeather: currentWeather,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 11\n      }\n    })));\n  } else if (errorMessage) {\n    return React.createElement(View, {\n      style: styles.container,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 7\n      }\n    }, React.createElement(Text, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 9\n      }\n    }, errorMessage), React.createElement(StatusBar, {\n      style: \"auto\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }\n    }));\n  } else {\n    return React.createElement(View, {\n      style: styles.container,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 7\n      }\n    }, React.createElement(ActivityIndicator, {\n      size: \"large\",\n      color: colors.PRIMARY_COLOR,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 9\n      }\n    }), React.createElement(StatusBar, {\n      style: \"auto\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 9\n      }\n    }));\n  }\n}\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    justifyContent: 'center'\n  },\n  main: {\n    flex: 1,\n    justifyContent: 'center'\n  }\n});","map":{"version":3,"sources":["/Users/hkhanhlam99/Desktop/Repo/WeatherApp-API/App.js"],"names":["StatusBar","React","useState","useEffect","Location","colors","WeatherInfo","UnitsPicker","ReloadIcon","WEATHER_BASE_URL","PRIMARY_COLOR","SECONDARY_COLOR","BASE_COLOR","App","errorMessage","setErrorMessage","currentWeather","setCurrentWeather","unitsSystem","setUnitsSystem","load","requestPermissionsAsync","status","getCurrentPositionAsync","location","coords","latitude","longitude","WEATHER_URL","fetch","response","json","result","ok","message","styles","container","main","StyleSheet","create","flex","justifyContent"],"mappings":"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","sourcesContent":["import { StatusBar } from 'expo-status-bar';\nimport React, {useState, useEffect} from 'react';\nimport { StyleSheet, Text, View, ActivityIndicator } from 'react-native';\nimport * as Location from 'expo-location';\nimport {WEATHER_API_KEY} from '@env';\nimport {colors} from './utils/colors';\nimport WeatherInfo from './components/WeatherInfo';\nimport UnitsPicker from './components/UnitsPicker';\nimport ReloadIcon from './components/ReloadIcon';\n\n\nconst WEATHER_BASE_URL = 'https://api.openweathermap.org/data/2.5/weather?';\nconst {PRIMARY_COLOR, SECONDARY_COLOR, BASE_COLOR} = colors;\n\nexport default function App() {\n  const [errorMessage, setErrorMessage] = useState(null);\n  const [currentWeather, setCurrentWeather] = useState(null);\n  const [unitsSystem, setUnitsSystem] = useState('metric');\n\n\n  useEffect(() => {\n    load();\n  }, [unitsSystem]);\n\n  async function load () {\n    try {\n      // get request permision\n      let {status} = await Location.requestPermissionsAsync();\n      \n      if(status !== 'granted') {\n        setErrorMessage('Permission to access location was denied');\n        return;\n      }\n      // get current location\n      const location = await Location.getCurrentPositionAsync();\n      // get latitude and longitude of location\n      const {latitude, longitude} = location.coords;\n      // URL path\n      const WEATHER_URL = `${WEATHER_BASE_URL}lat=${latitude}&lon=${longitude}&units=${unitsSystem}&appid=${WEATHER_API_KEY}`;\n      // request API call\n      const response = await fetch(WEATHER_URL);\n      // transform API response to json\n      const result = await response.json();\n\n      if(response.ok) {\n        setCurrentWeather(result);\n      }\n      else {\n        setErrorMessage(result.message);\n      }\n\n      // alert(`latitude:${latitude}, longitude:${longitude}`);\n    } catch (error) {\n      setErrorMessage(error.message);\n    }\n  }\n\n  if(currentWeather) {\n    return (\n      <View style={styles.container}>\n        <StatusBar style=\"auto\" />\n          <View style={styles.main}>\n          <ReloadIcon load={load}/>\n          <UnitsPicker unitsSystem={unitsSystem} setUnitsSystem={setUnitsSystem}/>\n          <WeatherInfo currentWeather={currentWeather}/>\n          </View>\n      </View>\n    );\n  }\n  else if(errorMessage){\n    return (\n      <View style={styles.container}>\n        <Text>{errorMessage}</Text>\n        <StatusBar style=\"auto\" />\n      </View>\n    );\n  }\n  else {\n    return (\n      <View style={styles.container}>\n        <ActivityIndicator size='large' color={colors.PRIMARY_COLOR}/>\n        <StatusBar style=\"auto\" />\n      </View>\n    ); \n  } \n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    justifyContent: 'center'\n  },\n  main: {\n    flex: 1,\n    justifyContent: 'center'\n  }\n});\n"]},"metadata":{},"sourceType":"module"}